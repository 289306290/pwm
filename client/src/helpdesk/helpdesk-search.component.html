<!--
  ~ Password Management Servlets (PWM)
  ~ http://www.pwm-project.org
  ~
  ~ Copyright (c) 2006-2009 Novell, Inc.
  ~ Copyright (c) 2009-2017 The PWM Project
  ~
  ~ This program is free software; you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation; either version 2 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program; if not, write to the Free Software
  ~ Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  -->

<mf-app-bar>
    <div id="page-content-title" translate="Title_HelpDesk">Help Desk</div>
    <mf-search-bar search-text="$ctrl.query"
                   on-search-text-change="$ctrl.onSearchTextChange(value)"
                   auto-focus></mf-search-bar>
    <span flex></span>
    <mf-icon-button
        icon="view-tile_thin"
        ng-attr-title="{{ 'Title_HelpDeskCard' | translate }}"
        ng-class="{selected: $ctrl.view === 'cards'}"
        ng-click="$ctrl.gotoCardsView()"
        ng-disabled="$ctrl.view === 'cards'"
        id="view-tile-icon"></mf-icon-button>
    <mf-icon-button
        icon="view-list_thin"
        ng-attr-title="{{ 'Title_HelpDeskTable' | translate }}"
        ng-class="{selected: $ctrl.view === 'table'}"
        ng-click="$ctrl.gotoTableView()"
        ng-disabled="$ctrl.view === 'table'"
        id="view-list-icon"></mf-icon-button>
</mf-app-bar>
<mf-button ng-if="$ctrl.verificationsEnabled"
           ng-click="$ctrl.showVerifications()">{{ 'Button_Verifications' | translate }}</mf-button>

<div class="people-search-component-content">
    <div class="person-card-list" ng-show="$ctrl.view === 'cards'">
        <person-card person="person"
                     show-image="$ctrl.photosEnabled"
                     ng-repeat="person in $ctrl.searchResult.people | orderBy:'displayNames[0]'"
                     ng-click="$ctrl.selectPerson(person)">
        </person-card>
    </div>

    <mf-table data="person in $ctrl.searchResult.people"
              ng-show="$ctrl.view === 'table' && $ctrl.searchResult.people.length"
              search-highlight="$ctrl.query"
              on-click-item="$ctrl.selectPerson(person)">
        <mf-table-column ng-repeat="(key, value) in $ctrl.columnConfiguration"
                         label="value"
                         value="'person.' + key">
        </mf-table-column>
    </mf-table>
</div>
