<app-bar>
    <div id="page-content-title">Organization</div>
    <span flex></span>
    <icon-button ng-click="$ctrl.close()"></icon-button>
</app-bar>

<div class="org-chart-section managers" ng-if="$ctrl.hasManagementChain() || $ctrl.isPersonOrphan()">
    <h3>Management</h3>
    <div ng-if="!$ctrl.isPersonOrphan()">
        <div class="manager"
             ng-repeat="manager in $ctrl.getManagementChain() track by $id(manager.displayNames)"
             ng-switch="$ctrl.getManagerCardSize()">
            <div class="org-chart-connector"></div>
            <person-card person="manager"
                         size="small"
                         ng-click="$ctrl.selectPerson(manager.userKey)" ng-switch-when="small">
            </person-card>
            <person-card person="manager"
                         ng-click="$ctrl.selectPerson(manager.userKey)" show-direct-report-count="true" ng-switch-default>
            </person-card>
        </div>
    </div>
    <div ng-if="$ctrl.isPersonOrphan()">
        <div class="manager empty-manager"
             ng-switch="$ctrl.getManagerCardSize()">
            <div class="org-chart-connector"></div>
            <person-card person="$ctrl.emptyPerson" size="small" ng-switch-when="small"></person-card>
            <person-card person="$ctrl.emptyPerson" ng-switch-default></person-card>
        </div>
    </div>
</div>

<div class="org-chart-section">
    <person-card person="$ctrl.person" direct-reports="$ctrl.directReports" size="large" show-direct-report-count="true"></person-card>
</div>

<div class="org-chart-section direct-reports" ng-if="$ctrl.hasDirectReports()">
    <h3>Direct Reports</h3>
    <div class="org-chart-connector"></div>

    <div class="person-card-list">
        <person-card person="directReport" show-direct-report-count="true"
                     ng-repeat="directReport in $ctrl.directReports"
                     ng-click="$ctrl.selectPerson(directReport.userKey)">
        </person-card>
    </div>

    <div class="person-card-list" ng-if="!$ctrl.hasDirectReports()">
        <span class="empty-section-label">0 direct reports</span>
    </div>
</div>
